# [Codeforces 1472F](https://codeforces.com/problemset/problem/1472/F)

## 题目大意：

有一个`2 * n`的棋盘，其中有`m`个格子是坏的，求问该棋盘能否刚好用若干个`1 * 2`的矩形块完全覆盖（除了坏的格子）。

题目中的`n`、`m`分别为`10^9`、`10^5`量级。

## 解题思路

首先不难想到，`m`必须是偶数，不然不可能完全填满（会剩下至少一个格子）。

其次，如果有某一列，其上下两格都是坏的，那么可将问题一分为二，分为左右两个子棋盘来讨论。

因此，第一步思路，就是按出现某列中上下都坏的位置分为若干段，每段的坏格子数都必为偶数。

分段后的棋盘，只可能出现某一行或上或下有一个格子是坏的情况。我们将坏格子按列序号排序，在每一段中，从
一端开始往另一端考虑。

前两个坏的格子之间将可能出现如下四种情况：（在其左右增删任意列，或其中间增删任意偶数列，其结果不变）

1. 两坏格子一上一下，中间间隔了偶数列（即两列序号之差为奇数），则不可填满

| _ | X |  
|---|---|  
| X | _ |  

2. 两坏格子一上一下，中间间隔了奇数列（即两列序号之差为偶数），则可按如下方式填满

| [=|=] | X |
|---|---|---|
| X | [=|=] |

3. 两坏格子同上同下，中间间隔了奇数列（即两列序号之差为偶数），则不可填满

| _ | _ | _ |
|---|---|---|
| X | _ | X |

4. 两坏格子同上同下，中间间隔了偶数列（即两列序号之差为奇数），则可按如下方式填满

| [=|=] | [=|=] |
|---|---|---|---|
| X | [=|=] | X |

其中，一旦出现1、3两种情况，不论后面的坏格子如何分布，整个棋盘都无法被填满。因此可以在棋盘的每段
内部作两两配对，出现2、4情况则忽略，出现1、3情况则配对失败。最后若全部的格子都能配对成2、4的情形，
那么整个棋盘就可以被填满；但只要出现一次1、3情况，则不可填满。

排序的复杂度是`O(m log m)`，扫描所有坏格子的复杂度为`O(m)`，因此整体复杂度为`O(m log m)`，
对于`10^5`量级的`m`，完全可以承受。
